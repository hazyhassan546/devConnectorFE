{"ast":null,"code":"import _regeneratorRuntime from\"/Users/hassanabbas/Desktop/Nodejs/DevConnector/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/hassanabbas/Desktop/Nodejs/DevConnector/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import axios from\"axios\";import{ENDPOINTS}from\"../../common/routes\";import{AlertHelper}from\"../../helpers/alertHelper\";import{ApiDelete,ApiPost}from\"../../helpers/apiHelper\";import setAuthToken from\"../../helpers/setAuthToken\";import{setAlert}from\"../action/alert\";import{authActionCreator}from\"../action/auth\";import store from\"../store\";export var loadUser=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(localStorage.token){setAuthToken(localStorage.token);}_context.prev=1;_context.next=4;return axios.get(\"api/auth\");case 4:res=_context.sent;store.dispatch(authActionCreator.userLoaded(res.data));_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);store.dispatch(authActionCreator.authError());case 11:case\"end\":return _context.stop();}}},_callee,null,[[1,8]]);}));return function loadUser(){return _ref.apply(this,arguments);};}();export var registerAPI=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(params){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return ApiPost(ENDPOINTS.register,params.body);case 3:res=_context2.sent;if(!res.errors){AlertHelper({msg:\"User Registered Successfully\",alertType:\"success\"});store.dispatch(authActionCreator.registerUserSuccess(res.data));store.dispatch(authActionCreator.loadUser());}else{store.dispatch(authActionCreator.registerUserFailed());res.errors.map(function(item){AlertHelper({msg:item.msg,alertType:\"danger\"});console.log(\"any\",res);});}_context2.next=9;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);case 9:case\"end\":return _context2.stop();}}},_callee2,null,[[0,7]]);}));return function registerAPI(_x){return _ref2.apply(this,arguments);};}();export var loginApi=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(params){var res;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return ApiPost(ENDPOINTS.login,params);case 3:res=_context3.sent;if(res.data){AlertHelper({msg:\"User Login Successfully\",alertType:\"success\"});store.dispatch(authActionCreator.loginSuccess(res.data));store.dispatch(authActionCreator.loadUser());}else{store.dispatch(authActionCreator.loginError());res.errors.map(function(item){AlertHelper({msg:item.msg,alertType:\"danger\"});console.log(\"any\",res);});}_context3.next=10;break;case 7:_context3.prev=7;_context3.t0=_context3[\"catch\"](0);store.dispatch(authActionCreator.loginError());case 10:case\"end\":return _context3.stop();}}},_callee3,null,[[0,7]]);}));return function loginApi(_x2){return _ref3.apply(this,arguments);};}();export var deleteAccountApi=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var res;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return ApiDelete(ENDPOINTS.deleteProfile);case 3:res=_context4.sent;store.dispatch(authActionCreator.deleteAccountSuccess());_context4.next=10;break;case 7:_context4.prev=7;_context4.t0=_context4[\"catch\"](0);store.dispatch(authActionCreator.deleteAccountError());case 10:case\"end\":return _context4.stop();}}},_callee4,null,[[0,7]]);}));return function deleteAccountApi(){return _ref4.apply(this,arguments);};}();","map":{"version":3,"sources":["/Users/hassanabbas/Desktop/Nodejs/DevConnector/client/src/redux/ApiCalls/authAPi.js"],"names":["axios","ENDPOINTS","AlertHelper","ApiDelete","ApiPost","setAuthToken","setAlert","authActionCreator","store","loadUser","localStorage","token","get","res","dispatch","userLoaded","data","authError","registerAPI","params","register","body","errors","msg","alertType","registerUserSuccess","registerUserFailed","map","item","console","log","loginApi","login","loginSuccess","loginError","deleteAccountApi","deleteProfile","deleteAccountSuccess","deleteAccountError"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport { ENDPOINTS } from \"../../common/routes\";\nimport { AlertHelper } from \"../../helpers/alertHelper\";\nimport { ApiDelete, ApiPost } from \"../../helpers/apiHelper\";\nimport setAuthToken from \"../../helpers/setAuthToken\";\nimport { setAlert } from \"../action/alert\";\nimport { authActionCreator } from \"../action/auth\";\nimport store from \"../store\";\n\nexport const loadUser = async () => {\n  if (localStorage.token) {\n    setAuthToken(localStorage.token);\n  }\n  try {\n    const res = await axios.get(\"api/auth\");\n    store.dispatch(authActionCreator.userLoaded(res.data));\n  } catch (error) {\n    store.dispatch(authActionCreator.authError());\n  }\n};\n\nexport const registerAPI = async (params) => {\n  try {\n    const res = await ApiPost(ENDPOINTS.register, params.body);\n    if (!res.errors) {\n      AlertHelper({\n        msg: \"User Registered Successfully\",\n        alertType: \"success\",\n      });\n      store.dispatch(authActionCreator.registerUserSuccess(res.data));\n      store.dispatch(authActionCreator.loadUser());\n    } else {\n      store.dispatch(authActionCreator.registerUserFailed());\n      res.errors.map((item) => {\n        AlertHelper({ msg: item.msg, alertType: \"danger\" });\n        console.log(\"any\", res);\n      });\n    }\n  } catch (error) {}\n};\n\nexport const loginApi = async (params) => {\n  try {\n    const res = await ApiPost(ENDPOINTS.login, params);\n    if (res.data) {\n      AlertHelper({\n        msg: \"User Login Successfully\",\n        alertType: \"success\",\n      });\n      store.dispatch(authActionCreator.loginSuccess(res.data));\n      store.dispatch(authActionCreator.loadUser());\n    } else {\n      store.dispatch(authActionCreator.loginError());\n      res.errors.map((item) => {\n        AlertHelper({ msg: item.msg, alertType: \"danger\" });\n        console.log(\"any\", res);\n      });\n    }\n  } catch (error) {\n    store.dispatch(authActionCreator.loginError());\n  }\n};\n\nexport const deleteAccountApi = async () => {\n  try {\n    const res = await ApiDelete(ENDPOINTS.deleteProfile);\n    store.dispatch(authActionCreator.deleteAccountSuccess());\n  } catch (error) {\n    store.dispatch(authActionCreator.deleteAccountError());\n  }\n};\n"]},"metadata":{},"sourceType":"module"}