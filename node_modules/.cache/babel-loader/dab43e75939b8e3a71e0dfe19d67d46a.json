{"ast":null,"code":"import _regeneratorRuntime from\"/Users/hassanabbas/Desktop/Nodejs/DevConnector/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/hassanabbas/Desktop/Nodejs/DevConnector/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/Users/hassanabbas/Desktop/Nodejs/DevConnector/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/hassanabbas/Desktop/Nodejs/DevConnector/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/hassanabbas/Desktop/Nodejs/DevConnector/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{Fragment,useEffect,useState}from\"react\";import{globalConnect}from\"../../redux/connect/globalConnect\";import Moment from\"react-moment\";import{Link}from\"react-router-dom\";import Spinner from\"../../components/layouts/spinner\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PostDetails=function PostDetails(props){var _post$post,_post$post2,_post$post3,_post$post4,_post$post5,_post$post5$comments,_post$post6;var _useState=useState({text:\"\",postId:\"\"}),_useState2=_slicedToArray(_useState,2),formData=_useState2[0],setFormData=_useState2[1];var _onChange=function onChange(e){var _props$post,_props$post$post;setFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({postId:props===null||props===void 0?void 0:(_props$post=props.post)===null||_props$post===void 0?void 0:(_props$post$post=_props$post.post)===null||_props$post$post===void 0?void 0:_props$post$post._id},e.target.name,e.target.value)));};var submitForm=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();if(formData.text!==\"\"){props.addComment(formData);}case 2:case\"end\":return _context.stop();}}},_callee);}));return function submitForm(_x){return _ref.apply(this,arguments);};}();useEffect(function(){var _props$match,_props$match$params;props.getSinglePost({postId:(_props$match=props.match)===null||_props$match===void 0?void 0:(_props$match$params=_props$match.params)===null||_props$match$params===void 0?void 0:_props$match$params.id});},[]);var post=props.post;return/*#__PURE__*/_jsx(Fragment,{children:post.loading?/*#__PURE__*/_jsx(Spinner,{}):post.post!==null?/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(Link,{to:\"/Posts\",class:\"btn\",children:\"Back To Posts\"}),/*#__PURE__*/_jsxs(\"div\",{class:\"post bg-white p-1 my-1\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Link,{to:\"profile/\".concat(post===null||post===void 0?void 0:(_post$post=post.post)===null||_post$post===void 0?void 0:_post$post.user),children:[/*#__PURE__*/_jsx(\"img\",{class:\"round-img\",src:post===null||post===void 0?void 0:(_post$post2=post.post)===null||_post$post2===void 0?void 0:_post$post2.avatar,alt:\"\"}),/*#__PURE__*/_jsx(\"h4\",{children:post===null||post===void 0?void 0:(_post$post3=post.post)===null||_post$post3===void 0?void 0:_post$post3.name})]})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"p\",{class:\"my-1\",children:post===null||post===void 0?void 0:(_post$post4=post.post)===null||_post$post4===void 0?void 0:_post$post4.text})})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"post-form\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"bg-primary p\",children:/*#__PURE__*/_jsx(\"h3\",{children:\"Leave A Comment\"})}),/*#__PURE__*/_jsxs(\"form\",{class:\"form my-1\",onSubmit:function onSubmit(e){return submitForm(e);},children:[/*#__PURE__*/_jsx(\"textarea\",{name:\"text\",cols:\"30\",rows:\"5\",placeholder:\"Comment on this post\",required:true,value:formData.text,onChange:function onChange(e){_onChange(e);}}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",class:\"btn btn-dark my-1\",value:\"Submit\"})]})]}),/*#__PURE__*/_jsx(\"div\",{class:\"comments\",children:(post===null||post===void 0?void 0:(_post$post5=post.post)===null||_post$post5===void 0?void 0:(_post$post5$comments=_post$post5.comments)===null||_post$post5$comments===void 0?void 0:_post$post5$comments.length)>0&&/*#__PURE__*/_jsx(Fragment,{children:post===null||post===void 0?void 0:(_post$post6=post.post)===null||_post$post6===void 0?void 0:_post$post6.comments.map(function(item){var _props$auth,_props$auth$user;return/*#__PURE__*/_jsxs(\"div\",{class:\"post bg-white p-1 my-1\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"a\",{href:\"profile.html\",children:[/*#__PURE__*/_jsx(\"img\",{class:\"round-img\",src:item===null||item===void 0?void 0:item.avatar,alt:\"\"}),/*#__PURE__*/_jsx(\"h4\",{children:item===null||item===void 0?void 0:item.name})]})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{class:\"my-1\",children:item===null||item===void 0?void 0:item.text}),/*#__PURE__*/_jsxs(\"p\",{class:\"post-date\",children:[\"Posted on\",/*#__PURE__*/_jsx(Moment,{format:\"YYYY/MM/DD\",children:item===null||item===void 0?void 0:item.date})]}),(item===null||item===void 0?void 0:item.user)===(props===null||props===void 0?void 0:(_props$auth=props.auth)===null||_props$auth===void 0?void 0:(_props$auth$user=_props$auth.user)===null||_props$auth$user===void 0?void 0:_props$auth$user._id)&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",class:\"btn btn-danger\",onClick:function onClick(){var _post$post7;props.deleteComment({commentId:item===null||item===void 0?void 0:item._id,postId:post===null||post===void 0?void 0:(_post$post7=post.post)===null||_post$post7===void 0?void 0:_post$post7._id});},children:/*#__PURE__*/_jsx(\"i\",{class:\"fas fa-times\"})})]})]});})})})]}):/*#__PURE__*/_jsx(\"p\",{children:\"No Post Found\"})});};export default globalConnect()(PostDetails);","map":{"version":3,"sources":["/Users/hassanabbas/Desktop/Nodejs/DevConnector/client/src/views/post/postDetails.js"],"names":["React","Fragment","useEffect","useState","globalConnect","Moment","Link","Spinner","PostDetails","props","text","postId","formData","setFormData","onChange","e","post","_id","target","name","value","submitForm","preventDefault","addComment","getSinglePost","match","params","id","loading","user","avatar","comments","length","map","item","date","auth","deleteComment","commentId"],"mappings":"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","sourcesContent":["import React, { Fragment, useEffect, useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { globalConnect } from \"../../redux/connect/globalConnect\";\nimport Moment from \"react-moment\";\nimport { Link } from \"react-router-dom\";\nimport Spinner from \"../../components/layouts/spinner\";\n\nconst PostDetails = (props) => {\n  const [formData, setFormData] = useState({\n    text: \"\",\n    postId: \"\",\n  });\n\n  const onChange = (e) => {\n    setFormData({\n      ...formData,\n      postId: props?.post?.post?._id,\n      [e.target.name]: e.target.value,\n    });\n  };\n\n  const submitForm = async (e) => {\n    e.preventDefault();\n    if (formData.text !== \"\") {\n      props.addComment(formData);\n    }\n  };\n  useEffect(() => {\n    props.getSinglePost({\n      postId: props.match?.params?.id,\n    });\n  }, []);\n  const { post } = props;\n  return (\n    <Fragment>\n      {post.loading ? (\n        <Spinner></Spinner>\n      ) : post.post !== null ? (\n        <Fragment>\n          <Link to=\"/Posts\" class=\"btn\">\n            Back To Posts\n          </Link>\n          <div class=\"post bg-white p-1 my-1\">\n            <div>\n              <Link to={`profile/${post?.post?.user}`}>\n                <img class=\"round-img\" src={post?.post?.avatar} alt=\"\" />\n                <h4>{post?.post?.name}</h4>\n              </Link>\n            </div>\n            <div>\n              <p class=\"my-1\">{post?.post?.text}</p>\n            </div>\n          </div>\n\n          <div class=\"post-form\">\n            <div class=\"bg-primary p\">\n              <h3>Leave A Comment</h3>\n            </div>\n            <form class=\"form my-1\" onSubmit={(e) => submitForm(e)}>\n              <textarea\n                name=\"text\"\n                cols=\"30\"\n                rows=\"5\"\n                placeholder=\"Comment on this post\"\n                required\n                value={formData.text}\n                onChange={(e) => {\n                  onChange(e);\n                }}\n              ></textarea>\n              <input type=\"submit\" class=\"btn btn-dark my-1\" value=\"Submit\" />\n            </form>\n          </div>\n\n          <div class=\"comments\">\n            {post?.post?.comments?.length > 0 && (\n              <Fragment>\n                {post?.post?.comments.map((item) => {\n                  return (\n                    <div class=\"post bg-white p-1 my-1\">\n                      <div>\n                        <a href=\"profile.html\">\n                          <img class=\"round-img\" src={item?.avatar} alt=\"\" />\n                          <h4>{item?.name}</h4>\n                        </a>\n                      </div>\n                      <div>\n                        <p class=\"my-1\">{item?.text}</p>\n                        <p class=\"post-date\">\n                          Posted on\n                          <Moment format={\"YYYY/MM/DD\"}>{item?.date}</Moment>\n                        </p>\n                        {item?.user === props?.auth?.user?._id && (\n                          <button\n                            type=\"button\"\n                            class=\"btn btn-danger\"\n                            onClick={() => {\n                              props.deleteComment({\n                                commentId: item?._id,\n                                postId: post?.post?._id,\n                              });\n                            }}\n                          >\n                            <i class=\"fas fa-times\"></i>\n                          </button>\n                        )}\n                      </div>\n                    </div>\n                  );\n                })}\n              </Fragment>\n            )}\n          </div>\n        </Fragment>\n      ) : (\n        <p>No Post Found</p>\n      )}\n    </Fragment>\n  );\n};\n\nPostDetails.propTypes = {};\n\nexport default globalConnect()(PostDetails);\n"]},"metadata":{},"sourceType":"module"}